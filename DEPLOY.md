# ğŸ–¼ï¸ ç½‘ç«™æˆªå›¾æœåŠ¡ - å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç½‘ç«™æˆªå›¾æœåŠ¡ï¼Œæ”¯æŒï¼š
- ğŸ¯ è‡ªåŠ¨ç½‘ç«™æˆªå›¾
- â˜ï¸ é˜¿é‡Œäº‘OSSå­˜å‚¨
- ğŸ’¾ MySQLç¼“å­˜æœºåˆ¶
- ğŸŒ Webç•Œé¢æµ‹è¯•
- ğŸ³ Dockerä¸€é”®éƒ¨ç½²

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo>
cd snap

# 2. é…ç½®OSSå‚æ•°
cp .env.docker.example .env.docker
# ç¼–è¾‘ .env.docker å¡«å…¥ä½ çš„OSSé…ç½®

# 3. ä¸€é”®éƒ¨ç½²
./deploy-docker.sh

# 4. æµ‹è¯•æœåŠ¡
./test-docker.sh
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
npm install
npm run install-playwright

# 2. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘ .env é…ç½®æ•°æ®åº“å’ŒOSS

# 3. åˆå§‹åŒ–æ•°æ®åº“
npm run init-db
npm run migrate-oss

# 4. å¯åŠ¨æœåŠ¡
npm run dev
```

## ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æŸ¥

| æ£€æŸ¥é¡¹ | å‘½ä»¤ | é¢„æœŸç»“æœ |
|--------|------|----------|
| å¥åº·æ£€æŸ¥ | `curl http://localhost:3000/health` | `"success": true` |
| æˆªå›¾API | `curl "http://localhost:3000/api/screenshot?url=https://example.com"` | è¿”å›OSSå›¾ç‰‡URL |
| Webç•Œé¢ | æµè§ˆå™¨è®¿é—® `http://localhost:3000` | å¯è§†åŒ–æµ‹è¯•ç•Œé¢ |

## ğŸ”§ é…ç½®è¦æ±‚

### å¿…éœ€é…ç½®
- âœ… é˜¿é‡Œäº‘OSSè´¦å·å’Œå­˜å‚¨æ¡¶
- âœ… MySQLæ•°æ®åº“ï¼ˆæœ¬åœ°æˆ–äº‘ç«¯ï¼‰

### å¯é€‰é…ç½®
- ğŸ”§ è‡ªå®šä¹‰æˆªå›¾å°ºå¯¸é™åˆ¶
- ğŸ”§ ç¼“å­˜æ—¶é•¿è°ƒæ•´
- ğŸ”§ æœåŠ¡ç«¯å£è®¾ç½®

## ğŸ“ æ–‡ä»¶ç»“æ„

```
snap/
â”œâ”€â”€ ğŸ—ï¸ éƒ¨ç½²ç›¸å…³
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ deploy-docker.sh      # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ test-docker.sh        # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ ğŸ’» æºä»£ç 
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ server.js         # ä¸»æœåŠ¡
â”‚       â”œâ”€â”€ oss-service.js    # OSSå­˜å‚¨
â”‚       â”œâ”€â”€ screenshot-service.js # æˆªå›¾åŠŸèƒ½
â”‚       â””â”€â”€ scripts/          # å·¥å…·è„šæœ¬
â”œâ”€â”€ ğŸŒ å‰ç«¯
â”‚   â””â”€â”€ public/index.html     # Webæµ‹è¯•ç•Œé¢
â””â”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
    â”œâ”€â”€ .env.example          # æœ¬åœ°ç¯å¢ƒæ¨¡æ¿
    â””â”€â”€ .env.docker.example   # Dockerç¯å¢ƒæ¨¡æ¿
```

## ğŸ¯ APIæ¥å£

### æˆªå›¾æ¥å£
```http
GET /api/screenshot?url=https://example.com&width=800&height=600
```

### å“åº”æ ¼å¼
```json
{
  "success": true,
  "data": {
    "title": "ç½‘ç«™æ ‡é¢˜",
    "screenshotUrl": "http://oss-url/screenshot.png",
    "cached": false
  }
}
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **OSSä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥AccessKeyé…ç½®
   - ç¡®è®¤endpointä½¿ç”¨bucketä¸“ç”¨åœ°å€
   - éªŒè¯ç½‘ç»œè¿æ¥

2. **Playwrighté”™è¯¯**
   - Dockerç¯å¢ƒå·²é…ç½®DebianåŸºç¡€é•œåƒ
   - æœ¬åœ°ç¯å¢ƒè¿è¡Œ `npm run install-playwright`

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
   - éªŒè¯è¿æ¥å‚æ•°é…ç½®

### æ—¥å¿—æŸ¥çœ‹

```bash
# Dockerç¯å¢ƒ
docker-compose logs -f app

# æœ¬åœ°ç¯å¢ƒ
npm run dev  # å¼€å‘æ¨¡å¼æœ‰è¯¦ç»†æ—¥å¿—
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- âœ… ç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤æˆªå›¾
- âœ… OSSå­˜å‚¨é™ä½æœåŠ¡å™¨è´Ÿè½½
- âœ… è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
- âœ… å¹¶å‘è¯·æ±‚æ”¯æŒ

## ğŸ” å®‰å…¨è€ƒè™‘

- âœ… URLå‚æ•°éªŒè¯
- âœ… æˆªå›¾å°ºå¯¸é™åˆ¶
- âœ… è¯·æ±‚è¶…æ—¶æ§åˆ¶
- âœ… ç¯å¢ƒå˜é‡ä¿æŠ¤

---

**å¿«é€Ÿå¼€å§‹**: è¿è¡Œ `./deploy-docker.sh` å³å¯å®Œæˆéƒ¨ç½²ï¼
